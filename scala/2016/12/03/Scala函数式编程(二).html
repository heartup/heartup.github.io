<!DOCTYPE html>
<html>
  <head>
    
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="shortcut icon" href="/static/img/favicon.ico" />
        <title>Scala函数式编程(二) - Li Huanhuan</title>
        <meta name="author" content="Li Huanhuan" />
        <meta name="description" content="Scala函数式编程(二)" />
        <meta name="keywords" content="Scala函数式编程(二), Li Huanhuan, scala" />

        <meta content="0" property="fb:app_id">
        <meta content="Li Huanhuan" property="og:site_name">
        
          <meta content="Scala函数式编程(二)" property="og:title">
        
        
          <meta content="article" property="og:type">
        
        
          <meta content="My Personal Blog" property="og:description">
        
        
          <meta content="https://heartup.github.io/scala/2016/12/03/Scala%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B(%E4%BA%8C).html" property="og:url">
        
        
          <meta content="2016-12-03T00:00:00+08:00" property="article:published_time">
          <meta content="https://heartup.github.io/about/" property="article:author">
        
        
          <meta content="https://heartup.github.io/static/img/logo-high-resolution.png" property="og:image">
        
        
          
          <meta content="scala" property="article:section">
          
        
        
          
        
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@\#">
        <meta name="twitter:creator" content="@\#">
        
          <meta name="twitter:title" content="Scala函数式编程(二)">
        
        
          <meta name="twitter:url" content="https://heartup.github.io/scala/2016/12/03/Scala%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B(%E4%BA%8C).html">
        
        
          <meta name="twitter:description" content="My Personal Blog">
        
        

      <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">
      
        <!-- Custom Fonts -->
        <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">

        <!-- FontAwesome icons -->
        <link rel="stylesheet" href="https://use.fontawesome.com/74dfc6cf47.css">

        <!-- Core BootStrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <!-- Material Design CSS -->
        <link rel="stylesheet" href="https://heartup.github.io/static/css/bootstrap-material-design.min.css">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="https://heartup.github.io/static/css/syntax.css">

        <!-- Custom CSS -->        
        <link rel="stylesheet" href="https://heartup.github.io/static/css/thickbox.css">
        <link rel="stylesheet" href="https://heartup.github.io/static/css/main.css">
        <link rel="stylesheet" href="https://heartup.github.io/static/css/projects.css">

        <script type="text/javascript">
          //loadingImage is relative to project dir
          var tb_pathToImage = "https://heartup.github.io/static/img/loadingAnimation.gif";
        </script>

  </head>

  <body class="home overflow-hidden">
    <div class="header-panel shadow-z-2">
      <div class="container">
        <div class="row">
          <div class="col-md-3 col-sm-4 col-xs-12">
            <div class="row-picture">
              <img id="about" class="logo-img" src="/static/img/avatar.png" height="75px" width="75px">
            </div>
            <div class="row-details">
              <h4 class="list-group-item-heading">Li Huanhuan</h4>
              <p class="list-group-item-text">Developer</p>
              <div class="social-icons">
	
        <a class="icon" target="_blank" href=""><i class="fa fa-facebook"></i></a>
    
        <a class="icon" target="_blank" href=""><i class="fa fa-twitter"></i></a>
    
        <a class="icon" target="_blank" href=""><i class="fa fa-linkedin"></i></a>
    
        <a class="icon" target="_blank" href=""><i class="fa fa-stack-exchange"></i></a>
    
</div>

            </div>
            <div class="navbar-header pull-right">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <i class="fa fa-2x fa-bars"></i>
              </button>
            </div>
          </div>
          <div class="col-md-9 col-sm-8 col-xs-12">
            <h2 class="blog-title-pro">Scala函数式编程(二)</h2>
            <p class="info">
              
                <span class="time">03 Dec 2016</span>
              
              
                <span class="categories">
                  &raquo; 
                  
                    <a href="/category/scala">scala</a>
                    
                  
                </span>
              
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="container main outer">
      <div class="row">
        <div class="col-md-3 col-xs-12">
              <nav class="menu">
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
    <ul class="list-separator nav navbar-nav well well-primary post">

	
	
	
	
	
	
    
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12 current-menu-item Scala%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B(%E4%BA%8C).html"><a href="https://heartup.github.io/" target="_self"><i class="fa fa-home"></i> Home</a></li>

	
	
	
	
	
	
    
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12  Scala%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B(%E4%BA%8C).html"><a href="https://heartup.github.io/about/" target="_self"><i class="fa fa-comments"></i> About</a></li>

	
	
	
	
	
	
    
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12  Scala%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B(%E4%BA%8C).html"><a href="https://heartup.github.io/projects" target="_self"><i class="fa fa-github"></i> Projects</a></li>

	
	
	
	
	
	
    
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12  Scala%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B(%E4%BA%8C).html"><a href="https://heartup.github.io/resume" target="_self"><i class="fa fa-graduation-cap"></i> Resume</a></li>

	
	
	
	
	
	
    
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12  Scala%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B(%E4%BA%8C).html"><a href="https://heartup.github.io/feed.xml" target="_blank"><i class="fa fa-feed"></i> XML Feed</a></li>

</ul>

    </div>
    </nav>

        </div>
        <div class="col-md-9 col-xs-12 full">
          <div class="post-content well">
<article class="content">
    <div class="post"><h1 id="scala的函数式编程">Scala的函数式编程</h1>

<p>要点:</p>
<ul>
  <li>如何定义Singleton的Class</li>
  <li>如何定义一个Class的member</li>
  <li>如何用函数式编程的方式写循环语句</li>
  <li>Unit类型的返回值预示着什么</li>
  <li>Tail Recursive的函数需要满足什么条件</li>
  <li>Polymorphic functions</li>
</ul>

<h2 id="scala程序示例">Scala程序示例</h2>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// object 关键字定义了类的同时定义了这个类的唯一实例
</span><span class="k">object</span> <span class="nc">App</span> <span class="o">{</span>
  <span class="c1">// def引入的定义称为method
</span>  <span class="c1">// def定义的method, 或者val object引入的对象都称为member
</span>  <span class="c1">// member可用`.`操作符来使用
</span>  <span class="k">def</span> <span class="nf">abs</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span>
    <span class="nf">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">-</span><span class="n">x</span>
    <span class="k">else</span> <span class="n">x</span>

  <span class="k">private</span> <span class="k">def</span> <span class="nf">formatAbs</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
    <span class="k">val</span> <span class="nv">msg</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">"the abs of %d is %d"</span>
    <span class="nv">msg</span><span class="o">.</span><span class="py">format</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="nf">abs</span><span class="o">(</span><span class="n">x</span><span class="o">))</span>
  <span class="o">}</span>

  <span class="c1">// 入口程序需要定义在一个class或object中
</span>  <span class="k">def</span> <span class="nf">main</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="nf">println</span><span class="o">(</span><span class="nf">formatAbs</span><span class="o">(-</span><span class="mi">3</span><span class="o">))</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>在Scala中每个值都是object,每个object有0个或多个member.如果一个object的目的是给他的member一个命名空间,那么这个object也成为module.</p>

<p>Scala中没有操作符的概念,<code class="highlighter-rouge">2 + 3</code>是<code class="highlighter-rouge">2.+(3)</code>的简写,<code class="highlighter-rouge">+</code>是一个Int的member.</p>

<p><code class="highlighter-rouge">import MyModule._</code>执行后MyModule所有的非private的member可以通过member来直接引用而不需<code class="highlighter-rouge">.</code>操作符.</p>

<h2 id="higher-order-functions">Higher-order functions</h2>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">object</span> <span class="nc">App</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">fact</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="o">{</span>
    <span class="c1">// loop只在fact函数内可见,在函数式编程中定义一个局部作用域的函数
</span>    <span class="c1">// 和定义一个局部Int变量没有什么不同
</span>
    <span class="c1">// 满足tail recusive的函数在scala中生成的字节码和while loop类似
</span>    <span class="c1">// A call is said to be in tail position if the caller does nothing other than return the value of the recursive call.
</span>    <span class="nd">@annotation</span><span class="o">.</span><span class="py">tailrec</span>
    <span class="k">def</span> <span class="nf">loop</span><span class="o">(</span><span class="n">m</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">acc</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nf">if</span> <span class="o">(</span><span class="n">m</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="o">)</span> <span class="n">acc</span>
      <span class="k">else</span> <span class="nf">loop</span><span class="o">(</span><span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="o">,</span> <span class="n">acc</span> <span class="o">*</span> <span class="n">m</span><span class="o">)</span>
    <span class="o">}</span>

    <span class="nf">loop</span><span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">}</span>

  <span class="c1">// 这是一个高阶函数,因为它接受一个函数作为参数
</span>  <span class="c1">// 作为参数的函数一般为增强可读性命名为f,g,h等
</span>  <span class="k">def</span> <span class="nf">formatMsg</span><span class="o">(</span><span class="n">calcType</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">f</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=&gt;</span> <span class="nc">Int</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
    <span class="k">val</span> <span class="nv">msg</span> <span class="k">=</span> <span class="s">"the %s of %d id %d"</span>
    <span class="nv">msg</span><span class="o">.</span><span class="py">format</span><span class="o">(</span><span class="n">calcType</span><span class="o">,</span> <span class="n">n</span><span class="o">,</span> <span class="nf">f</span><span class="o">(</span><span class="n">n</span><span class="o">))</span>
  <span class="o">}</span>

  <span class="k">def</span> <span class="nf">main</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="nf">println</span><span class="o">(</span><span class="nf">formatMsg</span><span class="o">(</span><span class="s">"fact"</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="n">fact</span><span class="o">))</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="polymorphic-functions">Polymorphic functions</h2>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">object</span> <span class="nc">App</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">findFirst</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">list</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Boolean</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="o">{</span>
    <span class="c1">// loop是closure
</span>    <span class="c1">// a closure is a function together with a referencing environment for the non-local variables of that function.
</span>    <span class="c1">// A closure allows a function to access variables outside its immediate lexical scope.
</span>    <span class="c1">// 在这里在loop内部引用了外部变量list
</span>    <span class="nd">@tailrec</span>
    <span class="k">def</span> <span class="nf">loop</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span>
      <span class="nf">if</span> <span class="o">(</span><span class="n">n</span> <span class="o">&gt;=</span> <span class="nv">list</span><span class="o">.</span><span class="py">length</span><span class="o">)</span> <span class="o">-</span><span class="mi">1</span>
      <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="nf">f</span><span class="o">(</span><span class="nf">list</span><span class="o">(</span><span class="n">n</span><span class="o">)))</span> <span class="n">n</span>  <span class="c1">// 在内部函数里引用了外部list变量,就像在定义Int的表达式里引用了另一个变量一样
</span>      <span class="k">else</span> <span class="nf">loop</span><span class="o">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span>

    <span class="nf">loop</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
  <span class="o">}</span>

  <span class="k">def</span> <span class="nf">main</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="c1">// anonymous function或称为function literal
</span>    <span class="c1">// 至少为x,或者findFirst指明类型
</span>    <span class="nf">println</span><span class="o">(</span><span class="nf">findFirst</span><span class="o">(</span><span class="nc">Array</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">),</span> <span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">5</span><span class="o">))</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
</div>
</article>
<hr />


    
    
        
            
        
    

    
    
        
            
        
    

    
    
        
            
        
    

    
    
        
            
        
    

    
    
        
            
        
    

    
    
        
            
        
    

    
    
        
            
                
                <div class="panel-body">
                <h4>Related Posts</h4>
                <ul>
                
                <li class="relatedPost">
                    <a href="https://heartup.github.io/scala/2016/12/03/Scala%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B(%E4%B8%80).html">Scala函数式编程(一)</a>
                    
                        <small>(Categories: <a href="/category/scala">scala</a>)</small>
                    
                </li>
                
                
            
        
    

    
    
        
            
        
    


    </ul>
    </div>


<div class="PageNavigation">
  
    <a class="prev pull-left" href="/scala/2016/12/03/Scala%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B(%E4%B8%80).html">&laquo; Scala函数式编程(一)</a>
  
  
    <a class="next pull-right" href="/ai/2017/12/22/%E7%AC%AC5%E7%AB%A0-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80.html">第5章 机器学习基础 &raquo;</a>
  
</div>


<div class="disqus-comments">
    <div id="disqus_thread"></div>
    <div height="40px"/>
    <!--<script type="text/javascript">-->
        <!--/* <![CDATA[ */-->

        <!--var disqus_shortname = "lihuanhuan";-->
        <!--var disqus_identifier = "https://heartup.github.io_Scala函数式编程(二)";-->
        <!--var disqus_title = "Scala函数式编程(二)";-->

        <!--/* * * DON'T EDIT BELOW THIS LINE * * */-->
        <!--(function() {-->
            <!--var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;-->
            <!--dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';-->
            <!--(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);-->
        <!--})();-->
    <!--/* ]]> */-->
    <!--</script>-->
</div>
</div>

          <div class="row">
            <div class="col-md-12 col-xs-12 footer">
              <footer>
  © 2016 heartup@gmail.com <a href="#">Privacy link</a> - Powered by Jekyll.
</footer>
<div align="center">
  <!--<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>-->
  <!--<ins class="adsbygoogle"-->
    <!--style="display:block"-->
    <!--data-ad-client="ca-pub-0000000000000000"-->
    <!--data-ad-slot="0000000000"-->
    <!--data-ad-format="auto"></ins>-->
  <!--<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>-->
</div>

            </div>
          </div>
        </div> <!-- end /.col-md-9 -->
      </div> <!-- end /.row -->
    </div>

    
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="https://heartup.github.io/static/js/thickbox-compressed.js"></script>
<script src="https://heartup.github.io/static/js/material.min.js"></script>
<script src="https://heartup.github.io/static/js/main.js"></script>
<script src="https://heartup.github.io/static/js/projects.js"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

    <!--<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-88029887-1', 'auto');
  ga('send', 'pageview');

</script>-->
  </body>
</html>
